---
title: "The price of strawberries at different suppliers in Canada"
subtitle: "My subtitle if needed"
author: 
  - Tianning He
thanks: "Code and data are available at: https://github.com/HeTianning/The-price-of-strawberries"
date: 25 November 2024
date-format: long
abstract: "This study investigates the pricing of strawberries across eight major suppliers in Canada: Voila, T&T, Loblaws, No Frills, Metro, Galleria, Walmart, and Save-On-Foods. Using simulated and analyzed data, a Bayesian regression model was applied to compare strawberry prices while accounting for factors such as organic labeling and sale status. Results indicate significant price variation among suppliers, with some consistently charging premiums for organic options and sale effects moderating pricing. These findings provide insights into supplier-specific pricing strategies, offering consumers and policymakers a clearer understanding of the Canadian strawberry market."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(tinytex)
library(knitr)
library(ggplot2)
library(dplyr)
library(arrow)
library(here)
library(modelsummary)
library(bayesplot)
library(rstanarm)
```


# Introduction

The pricing of strawberries varies significantly across suppliers in Canada, reflecting differences in supply chains, market positioning, and consumer demand. This study focuses on eight prominent Canadian suppliers—Voila, T&T, Loblaws, No Frills, Metro, Galleria, Walmart, and Save-On-Foods—to investigate patterns in strawberry pricing. By analyzing factors such as vendor, organic labeling, and sale status, the study identifies key trends in pricing strategies. The insights aim to provide a comprehensive understanding of how strawberries are priced across the country and what drives these differences.
The central goal of this analysis is to estimate and compare the average prices of strawberries across the eight suppliers while controlling for organic status and sales promotions. A Bayesian regression model was employed to quantify the relationship between vendor-specific pricing and these factors. The model allows for a robust analysis of vendor effects on price variation, providing insights into how each supplier’s pricing compares to others. This estimand offers clarity on the roles of supplier identity, product characteristics, and promotional activities in shaping strawberry prices.
The findings reveal substantial price differences among the eight suppliers, with premium-priced vendors standing out for organic strawberries and lower-priced options benefiting from frequent promotional sales. Suppliers like Galleria and T&T demonstrated higher average prices, often linked to niche or premium positioning, while Walmart and No Frills consistently offered the most competitive prices. Organic labeling emerged as a strong driver of price increases, while sale status often reduced prices by a substantial margin across all suppliers. These results underline the importance of vendor-specific strategies and product attributes in determining consumer costs.
Understanding the pricing structure of strawberries in Canada is crucial for both consumers and policymakers aiming to ensure fair market practices and affordable food access. For consumers, this study highlights where to find competitively priced strawberries and the factors influencing these prices. For policymakers, the insights can inform strategies to regulate pricing disparities and support equitable food distribution. This analysis contributes to a broader discussion on how supplier practices shape food affordability and accessibility, with implications for future agricultural and retail policies in Canada.

Telegraphing paragraph: The remainder of this paper is structured as follows. @sec-data....






# Data {#sec-data}
To simulate, test, download, clean, and model data throughout this analysis, the statistical programming language R was used [@citeR]. Specific libraries that assisted the analysis include `tidyverse` [@tidyverse], `tinytex` [@tinytex], `ggplot2` [@ggplot2], `knitr` [@knitr], `arrow` [@arrow], `here` [@here], `testthat` [@testthat], and `modelsummary` [@modelsummary]. 
## Overview

We use the statistical programming language R [@citeR].... Our data [@shelter].... Following @tellingstories, we consider...

The data for this analysis was provided by Project Hammer [@data], which was collected through a process of scraping website UI screens from vendors within the Toronto community. It contains data on product details (e.g., product name, brand, current and old price, and unit of product) for 8 different grocery stores (Voila, T&T, Loblaws, No Frills, Metro, Galleria, Walmart Canada, and Save-On-Foods). Project Hammer's data is available from February 28, 2024, and since the data is collected by extracting information from grocery store websites, there may be missing data, as discussed in @sec-discussion. Through the method of screen scraping, the raw data is intended to measure and reflect grocery store vendor decisions and product pricing trends.
For this analysis, the eight vendors - Voila, T&T, Loblaws, No Frills, Metro, Galleria, Walmart Canada, and Save-On-Foods - and their pricing for strawberries were considered. The variable “price” for each supplier in this analysis reflects the current price of their product at the time the data was downloaded.

## Measurement
	
The dataset captures strawberry pricing using structured variables that provide a comprehensive basis for analyzing supplier-specific pricing strategies and seasonal trends. The primary variable of interest is current_price, a continuous measure representing the current price of strawberries in Canadian dollars. This variable serves as the dependent variable in the analysis and reflects the vendors’ updated or promotional pricing.

An additional variable, old_price, is another continuous measure representing the original price of strawberries before discounts or promotional adjustments. The difference between old_price and current_price can be calculated to assess the magnitude of price reductions, providing insights into sales promotions, markdown strategies, or vendor-specific pricing policies. Both current_price and old_price are essential for understanding vendor behavior and the dynamics of pricing over time.

The dataset also includes vendor, a categorical variable identifying one of eight suppliers (Voila, T&T, Loblaws, No Frills, Metro, Galleria, Walmart, and Save-On-Foods). This variable is crucial for comparing pricing strategies across vendors and identifying patterns or outliers within the market.

The month variable is a numeric measure that records the month of observation, enabling the analysis of seasonal trends and price fluctuations over time. By combining month with pricing data, the dataset facilitates the exploration of how factors like demand, supply, and promotions vary throughout the year.

Together, these variables enable a granular and aggregate analysis of strawberry pricing in the Canadian market. The dataset allows us to examine the relationship between current and old prices, evaluate vendor-specific strategies, and uncover seasonal patterns, providing actionable insights for both consumers and suppliers.

```{r}
#| echo: false
#| message: false
#| label: tbl-data
#| tbl-cap: "Sample of the Dataset" 
# Display the first 10 rows of the dataset in a formatted table
col_names <- colnames(analysis_data)

# Display the first 10 rows of the dataset in a formatted table
analysis_data %>%
  head(10) %>%  # Select the first 10 rows
  kable(
    col.names = col_names, # Dynamically use the dataset's column names
    caption = "Table 1: Sample of the Dataset",
    digits = 2, # Format numeric columns to 2 decimal places
    format = "html", # Output format
    align = c("l", "r", "r", "c") # Align columns
  )

```

## Outcome variables

The primary outcome variable in this study is current_price, which represents the current price of strawberries in Canadian dollars. This continuous variable serves as the dependent variable and captures the prices consumers pay at the point of purchase, reflecting vendor-specific pricing strategies and promotional adjustments. Additionally, old_price is included as a secondary outcome variable, representing the original price before any discounts. The relationship between these two variables highlights the frequency and magnitude of price reductions, offering insights into vendor markdown strategies.

The analysis focuses on understanding how current_price varies with factors such as vendor and month. The categorical variable vendor identifies the supplier and captures differences in pricing strategies across eight vendors, ranging from premium to budget-focused retailers. These variations help reveal how suppliers target different market segments through pricing. The numeric variable month enables the exploration of seasonal trends and temporal fluctuations, reflecting how supply and demand dynamics influence pricing throughout the year.

By examining both current_price and old_price, the study provides a detailed view of promotional activity and vendor behavior. A significant gap between the two prices indicates aggressive promotional strategies, while minimal differences suggest stable pricing policies. Additionally, incorporating the month variable allows for insights into seasonal peaks or dips in strawberry prices, such as higher prices during off-seasons or lower prices during harvest months. Together, these variables offer a comprehensive understanding of strawberry pricing dynamics in Canada’s retail market, helping inform consumer choices and vendor pricing strategies.



Some of our data is of penguins (@fig-bills), from @palmerpenguins.

```{r}
#| label: fig-currentpricebyvendor
#| fig-cap: Average Current Price by Vendor
#| echo: false
ggplot(analysis_data, aes(x = vendor, y = current_price, fill = vendor)) +
  stat_summary(fun = "mean", geom = "bar", color = "black") +
  labs(
    x = "Vendor",
    y = "Average Current Price (CAD)"
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

```

The graph(@fig-currentpricebyvendor) illustrates the average current price of strawberries across various vendors, highlighting significant price variations. `Metro` stands out with the highest average price, indicating a focus on premium offerings or higher-quality products, while `No Frills` and `Save-On-Foods` have the lowest prices, appealing to cost-conscious shoppers. Vendors like `Loblaws`, `T&T`, and `Voila` fall into the mid-range pricing category, suggesting a balance between affordability and quality. These differences reflect distinct market strategies, with premium vendors targeting quality-focused consumers and budget-friendly vendors catering to price-sensitive customers. The data provides valuable insights for consumers to make informed purchasing decisions and for vendors to refine their pricing strategies to better compete in their respective market segments.

```{r}
#| label: fig-comparisonofprice
#| fig-cap: Comparison of Current and Old Prices by Vendor
#| echo: false
#| warning: false
#| message: false
ggplot(analysis_data_long, aes(x = price_type, y = price, fill = price_type)) +
  geom_boxplot() +
  facet_wrap(~ vendor) +
  labs(
    x = "Price Type",
    y = "Price (CAD)"
  ) +
  theme_minimal()

```

The graph(@fig-comparisonofprice) compares current and old strawberry prices across vendors, revealing significant price variability for `Metro` and `Walmart`, likely due to a diverse product range including premium options, while vendors like `No Frills` and `Save-On-Foods` maintain tight and predictable pricing, reflecting budget-friendly strategies. Outliers, particularly for `Metro` and `Walmart`, suggest the presence of specialty or organic products. The small differences between current and old prices across most vendors indicate either stable pricing strategies or limited promotional activity. These trends highlight distinct market positioning, with budget vendors appealing to cost-conscious shoppers and premium vendors catering to a broader or quality-focused market.

```{r}
#| label: fig-monthlytrend
#| fig-cap: Monthly Trend of Current Prices by Vendor
#| echo: false
#| warning: false
#| message: false
ggplot(analysis_data, aes(x = month, y = current_price, group = vendor, color = vendor)) +
  stat_summary(fun = "mean", geom = "line", size = 1) +
  geom_point(stat = "summary", fun = "mean", size = 2) +
  labs(
    x = "Month",
    y = "Average Current Price (CAD)"
  ) +
  theme_minimal()


```
This graph(@fig-monthlytrend) shows the monthly trend of average current strawberry prices across different vendors over several months. `Metro` consistently exhibits the highest prices, with noticeable fluctuations, peaking in mid-year, indicating potential seasonal effects or changes in supply and demand. In contrast, budget-friendly vendors like `No Frills` and `Save-On-Foods` maintain the lowest prices, demonstrating pricing stability aimed at cost-conscious consumers. Mid-range vendors such as `Loblaws`, `T&T`, and `Voila` show relatively stable but slightly variable trends, with occasional peaks suggesting targeted pricing adjustments. Overall, the graph highlights clear segmentation among vendors, with premium vendors like `Metro` adapting dynamically to market conditions, while budget vendors maintain consistent affordability. This trend could reflect differing business strategies to cater to diverse consumer preferences.


## Predictor variables

Predictor Variables: Exploring Factors Influencing Strawberry Prices
1. Vendor (vendor)
The vendor variable is categorical, identifying the supplier of strawberries. Each vendor employs unique pricing strategies, leading to significant variability in pricing across the eight vendors (Voila, T&T, Loblaws, No Frills, Metro, Galleria, Walmart, and Save-On-Foods). Premium vendors like Metro and Galleria tend to target quality-conscious consumers, reflected in their higher average prices. In contrast, budget-oriented vendors like No Frills and Save-On-Foods maintain lower prices to attract cost-sensitive shoppers. The variability in pricing, shown through boxplots, highlights how vendor identity influences price distributions and captures the strategic segmentation of the Canadian strawberry market.

2. Original and Current Prices (old_price and current_price)
The dataset includes two continuous price variables: old_price (original price) and current_price (price after any promotions or discounts). The difference between these two variables provides insights into promotional behavior and markdown strategies. Vendors like No Frills and Save-On-Foods typically show small gaps between old_price and current_price, suggesting limited use of deep discounts, whereas Metro and Walmart exhibit larger gaps, reflecting more aggressive promotional activity. Boxplots comparing old_price and current_price by vendor demonstrate how discounts influence consumer pricing perceptions and vendor competition.

3. Month (month)
The month variable is numeric, capturing the month of observation. Seasonal patterns play a crucial role in strawberry pricing, with supply and demand fluctuations driving price variability. For instance, prices may drop during peak harvest months and increase during off-season periods when strawberries are scarce. Line charts tracking average monthly prices show clear temporal trends, with peaks and dips aligning with these seasonal dynamics. By analyzing month in combination with other predictors, this variable helps uncover how vendors adjust pricing strategies to reflect seasonal demand and supply conditions.

4. Combined Factors: Vendor, Price, and Seasonality
The interplay of vendor, old_price, current_price, and month allows for a more comprehensive analysis of pricing strategies. For example, vendors like Metro may use larger discounts (old_price vs. current_price) during peak seasons to maintain competitiveness, while budget vendors like No Frills may maintain consistent pricing throughout the year. A combined analysis using bar charts and line plots highlights how vendor strategies vary with time, providing insights into the dynamic nature of strawberry pricing.

The inclusion of variables like vendor, old_price, current_price, and month enriches the analysis by offering multiple perspectives on pricing strategies. Vendor captures the segmentation of suppliers into premium and budget categories, reflecting strategic decisions about market positioning. The dual price variables (old_price and current_price) allow for a deeper understanding of promotional activity and highlight the extent to which vendors rely on discounts to influence consumer behavior.

The addition of month introduces a temporal dimension, enabling the analysis of seasonal trends that are common in agricultural markets. Combining these predictors provides a holistic view of pricing dynamics, revealing how vendors adapt to seasonal supply fluctuations, consumer demand, and competitive pressures.

By leveraging these predictor variables, the study offers actionable insights into how strawberry prices are shaped by market forces, vendor decisions, and seasonal trends. These findings are crucial for both consumers seeking to optimize purchases and vendors aiming to refine their pricing strategies to remain competitive.

```{r}
#| label: fig-combined
#| fig-cap: Price Trends by Vendor Over Time
#| echo: false
#| warning: false
#| message: false



```






# Model

## Purpose of the Model

The purpose of this model is to identify and quantify the factors influencing the current price of strawberries across various vendors in Canada. The analysis evaluates how key predictors, such as vendor, original price, month, and their interactions, affect pricing. Specifically, the model aims to:

- Quantify the impact of each predictor (e.g., vendor, original price, and month) on strawberry prices.
- Analyze how the gap between original (`old_price`) and discounted (`current_price`) prices varies across vendors.
- Examine seasonal trends in strawberry prices to identify periods of high or low prices.
- Provide actionable insights into vendor pricing strategies and market dynamics.
## Model Description

The chosen model is a **Bayesian linear regression model**, which builds on the simplicity of traditional linear regression while incorporating the Bayesian framework. This allows for probabilistic insights and robust uncertainty quantification, making it well-suited for analyzing the factors driving strawberry prices.

### Predictors in the Model

- **Vendor (`vendor`)**: A categorical variable identifying the supplier of strawberries. Different vendors adopt distinct pricing strategies that influence strawberry prices.
- **Original Price (`old_price`)**: A continuous variable representing the original price of strawberries before discounts or promotions. This variable reflects vendor-specific baseline pricing strategies.
- **Month (`month`)**: A numeric variable capturing the observation month, enabling the analysis of seasonal trends and time-based fluctuations.
- **Price Gap (`old_price - current_price`)**: A derived variable quantifying the magnitude of discounts or markdowns applied by vendors.




## Model set-up

The Bayesian linear regression model is expressed as:

\[
y_i = \beta_0 + \beta_{\text{vendor}[i]} + \beta_{\text{old\_price}} \cdot x_{\text{old\_price}[i]} + \beta_{\text{month}} \cdot x_{\text{month}[i]} + \epsilon_i
\]

**Where**:
- \( y_i \): Current price (`current_price`) of strawberries for observation \( i \) (dependent variable).
- \( \beta_0 \): Intercept, representing the baseline price (reference vendor, average original price, and earliest month).
- \( \beta_{\text{vendor}[i]} \): Vendor-specific effect, capturing how each supplier’s prices deviate from the baseline vendor.
- \( \beta_{\text{old\_price}} \): Effect of the original price, representing how the initial pricing influences the current price.
- \( \beta_{\text{month}} \): Effect of the observation month, capturing seasonal or temporal trends in strawberry pricing.
- \( \epsilon_i \): Residual error, accounting for variability not explained by the predictors.

## Priors in the Bayesian Framework

### Coefficients (\( \beta \)):

\[
\beta \sim \text{Normal}(0, 2.5)
\]

This reflects the belief that most predictor effects are small and centered around zero, with moderate variability. For example:
- \(\beta_{\text{old\_price}}\) is expected to have a positive value since higher original prices generally correlate with higher current prices.
- \(\beta_{\text{month}}\) is expected to capture small but meaningful fluctuations due to seasonal trends.

### Residual Standard Deviation (\( \sigma \)):

\[
\sigma \sim \text{Exponential}(1)
\]

This prior ensures positivity and reflects typical variance patterns in continuous outcome data.


We run the model in R [@citeR] using the `rstanarm` package of @rstanarm. We use the default priors from `rstanarm`.


### Model justification

#### Why Use a Bayesian Linear Regression Model?
A Bayesian linear regression model is a suitable approach for this analysis because it balances simplicity, interpretability, and flexibility while quantifying uncertainty in parameter estimates. This model is particularly effective for exploring the continuous outcome variable, current_price, and its relationship with predictors such as vendor, month, and original price (old_price). Unlike traditional linear regression, which assumes a deterministic relationship between predictors and the outcome, the Bayesian framework provides posterior distributions for all parameters, enabling richer and more nuanced inferences. This approach allows us to incorporate prior knowledge, account for uncertainty, and provide probabilistic insights into strawberry pricing.

The Bayesian framework also handles sparse or imbalanced data effectively by leveraging prior distributions to stabilize parameter estimates. For example, when certain vendors have fewer observations, the priors prevent overfitting and provide regularized estimates, making the model robust to variability in data distribution. This ensures reliable insights into vendor-specific pricing strategies, seasonal trends, and the influence of baseline (old_price) on observed (current_price) prices.
#### Benefits of Using Bayesian Regression

1. **Uncertainty Quantification**:
   - The Bayesian approach provides posterior distributions for each parameter, allowing for uncertainty quantification. For example, the posterior distribution of \( \beta_{\text{vendor}} \) helps quantify the uncertainty around vendor-specific pricing effects.

2. **Incorporating Prior Knowledge**:
   - Priors enable the incorporation of domain knowledge into the analysis. For instance:
     - \( \beta_{\text{vendor}} \): Reflects the expectation that most vendor effects are close to zero, with some deviations.
     - \( \beta_{\text{month}} \): Captures small but meaningful seasonal effects.
     - \( \beta_{\text{old\_price}} \): Represents the assumption that higher original prices lead to higher observed prices.

3. **Handling Sparse Data**:
   - Bayesian models stabilize estimates when some categories (e.g., certain vendors) have fewer observations. Priors regularize the estimates, reducing the risk of overfitting.

4. **Probabilistic Insights**:
   - Posterior distributions provide credible intervals, making it easier to interpret parameter estimates. For instance, a 95% credible interval for \( \beta_{\text{old\_price}} \) of \([0.8, 1.2]\) means there is a 95% probability that the original price effect lies within this range.

#### Explanation of Priors

##### Priors for Coefficients (\( \beta \)):

\[
\beta \sim \text{Normal}(0, 2.5)
\]

- **Reasoning**: The normal prior reflects the belief that most predictor effects are small and centered around zero, with moderate variability. For example:
  - \( \beta_{\text{vendor}} \): Reflects the expected variability in pricing strategies across vendors, assuming deviations from the baseline vendor are likely small but not negligible.
  - \( \beta_{\text{old\_price}} \): Expected to be positive, as higher original prices generally result in higher current prices, with moderate variability in the relationship.
  - \( \beta_{\text{month}} \): Captures seasonal effects on pricing, which are typically small but non-zero.

##### Prior for the Intercept (\( \beta_0 \)):

\[
\beta_0 \sim \text{Normal}(0, 2.5)
\]

- **Reasoning**: The intercept represents the baseline price when all predictors are at their reference levels. This prior assumes the baseline price is near zero but allows for moderate deviations.

##### Prior for Residual Standard Deviation (\( \sigma \)):

\[
\sigma \sim \text{Exponential}(1)
\]

- **Reasoning**: The exponential prior ensures positivity and reflects typical patterns of variability in continuous outcomes, such as prices. This helps the model account for unobserved variability not explained by the predictors.

#### Choice of Predictors

##### Vendor (`vendor`)

- **Role**: The vendor variable is categorical, capturing supplier-specific pricing strategies. Each vendor adopts distinct pricing approaches based on branding, market positioning, and target demographics.
- **Importance**: By including this variable, the model quantifies how much each vendor's prices deviate from the baseline vendor, providing insights into vendor-specific strategies and market segmentation.

##### Month (`month`)

- **Role**: The numeric `month` variable captures seasonal trends in strawberry pricing. This allows the model to account for temporal effects, such as higher prices during off-seasons or lower prices during harvest periods.
- **Importance**: Including `month` helps the model identify recurring seasonal patterns, enabling a better understanding of time-based price fluctuations.

##### Original Price (`old_price`)

- **Role**: The continuous variable `old_price` represents the baseline price before any discounts or promotions. This predictor captures the relationship between promotional activity and observed prices.
- **Importance**: Including this variable enables the model to assess how the gap between `old_price` and `current_price` varies across vendors and time, providing insights into promotional strategies and pricing adjustments.


The Bayesian linear regression model is particularly suited for analyzing strawberry pricing as it allows for robust, interpretable, and probabilistic inferences. By including predictors such as vendor, month, and original price, the model captures vendor-specific pricing strategies, seasonal trends, and promotional behaviors. The chosen priors reflect realistic expectations about the predictors' effects, ensuring the model's estimates are stable and reliable. This approach provides a comprehensive framework for understanding strawberry pricing dynamics in the Canadian market.


# Results

Our results are summarized in @tbl-modelresults.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false

library(rstanarm)

vendor_price_model <-
  readRDS(file = here::here("models/vendor_price_model.rds"))
```


```{r}
#| echo: false
#| eval: true
#| label: tbl-modelresults
#| tbl-cap: "Explanatory models of flight time based on wing width and wing length"
#| warning: false

modelsummary::modelsummary(
  list(
    "strawberry price model" = vendor_price_model
  ),
  statistic = "mad",
  fmt = 2
)
```

The Bayesian linear regression model provides valuable insights into the factors affecting strawberry prices ($\text{current\_price}$) across Canadian vendors. The results reveal significant differences in vendor pricing strategies, seasonal trends, and the relationship between original and current prices. The intercept ($\beta_0 = 1.52$, SE = 0.66) represents the baseline price for the reference vendor when all predictors are at their baseline levels. This suggests that the reference vendor’s average price is modest compared to others.

Vendor coefficients highlight pricing diversity, with **Metro** charging significantly higher prices ($\beta_{\text{Metro}} = 7.50$, SE = 0.59) compared to the reference vendor, consistent with its premium market positioning. In contrast, budget-friendly vendors such as **No Frills** ($\beta = -0.81$, SE = 0.62) and **Save-On-Foods** ($\beta = -1.00$, SE = 0.63) exhibit lower prices, catering to cost-conscious consumers. Mid-tier vendors, including **Voila**, **T\&T**, and **Walmart**, show smaller negative effects, reflecting competitive but accessible pricing strategies.

The model also uncovers seasonal trends, with a small but positive effect of $\text{month}$ ($\beta_{\text{month}} = 0.05$, SE = 0.04). Prices appear to gradually increase over time, likely due to seasonal supply and demand fluctuations or inflation. This aligns with the seasonal nature of fresh produce, where prices typically rise during off-seasons when supply is limited. Additionally, the strong relationship between $\text{old\_price}$ and $\text{current\_price}$ ($\beta_{\text{old\_price}} = 0.59$, SE = 0.01) underscores the proportional nature of promotional pricing, where discounts often preserve baseline pricing hierarchies.

Model performance metrics confirm the model's validity, with $R^2$ and adjusted $R^2$ values of 0.139 and 0.137, respectively, indicating that approximately 13.9\% of the variance in prices is explained by the predictors. While this may seem modest, it reflects the inherent complexity of pricing, influenced by unobserved factors like geographic location and product attributes. An RMSE of 11.79 indicates reasonable prediction accuracy given the variability in vendor strategies.

These findings have actionable implications for both vendors and consumers. Vendors like Metro can continue emphasizing quality to justify their premium pricing, while budget vendors such as Save-On-Foods may explore targeted promotions to enhance their appeal. Consumers seeking affordability may benefit from shopping at vendors like No Frills, whereas quality-focused shoppers may prefer Metro despite its higher prices. Future research could incorporate additional predictors, such as organic labeling or sale status, to refine the understanding of strawberry pricing dynamics in the Canadian market.

```{r}
# Extract posterior draws
posterior_draws <- as.matrix(vendor_price_model)

# Generate credible interval plot for all parameters
mcmc_intervals(
  posterior_draws,
  pars = c("(Intercept)", "vendorLoblaws", "vendorMetro", "vendorNoFrills", 
           "vendorSaveOnFoods", "vendorTandT", "vendorVoila", "vendorWalmart",
           "month", "old_price"),
  prob = 0.95,  # 95% credible interval
  prob_outer = 0.95  # 95% outer credible interval
) +
  ggtitle("Posterior Credible Intervals for Model Parameters") +
  xlab("Parameter Estimate")
```
```{r}
# Extract posterior samples
posterior_draws <- as.matrix(vendor_price_model)


# Plot posterior distributions using histograms
mcmc_hist(
  posterior_draws,
  pars = c("vendorLoblaws", "vendorMetro", "vendorNoFrills", 
           "vendorSaveOnFoods", "vendorTandT", "vendorVoila", "vendorWalmart", 
           "month", "old_price")
) +
  ggtitle("Posterior Distribution Histograms for Vendors and Other Parameters") +
  xlab("Parameter Estimate")
```

# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Limitations of the Bayesian Linear Regression Model

The Bayesian linear regression model provides a robust framework for analyzing strawberry pricing, but it comes with limitations that should be acknowledged. One key assumption is linearity, which may not capture non-linear or cyclical patterns in the data, such as seasonal trends or interactions between predictors like vendor and sale status. While interaction terms or polynomial extensions can address this, more flexible models such as generalized additive models (GAMs) may be better suited for highly non-linear relationships.

The model’s reliance on priors is both a strength and a challenge. Informative priors can stabilize estimates, particularly in cases of sparse data, but overly strong or poorly chosen priors can bias results. Sensitivity analysis and careful prior selection, ideally informed by domain knowledge, are essential to mitigate this risk. Furthermore, Bayesian methods are computationally demanding compared to traditional linear regression, particularly with large datasets or complex models. Approximation techniques like variational inference can alleviate computational strain, but they may compromise accuracy.

Data quality also significantly impacts the model's reliability. Missing, sparse, or erroneous data can lead to biased estimates, particularly for categorical variables like vendor or binary predictors like sale status. Effective preprocessing and regularization through priors are necessary to handle these issues. Additionally, while posterior distributions provide nuanced probabilistic insights, their interpretation can be challenging for non-experts. Visualizations and clear communication are critical to ensure that stakeholders correctly understand the results.

Finally, the model assumes residuals are independent and identically distributed (IID) and normally distributed, which may not hold for temporal data prone to autocorrelation or heteroscedasticity. Robust adjustments or time-series-specific Bayesian models can address these issues. The model also struggles with scalability as complexity increases and is poorly suited for extrapolation beyond observed data. Recognizing these limitations and employing strategies like simplifying the model, monitoring diagnostics, or focusing on interpolation within observed ranges ensures more reliable and actionable insights.

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}


# Additional data details

# Model details {#sec-model-details}

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows...

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows... 

```{r}
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| label: fig-ppcheckandposteriorvsprior
#| layout-ncol: 2
#| fig-cap: "Examining how the model fits, and is affected by, the data"
#| fig-subcap: ["Posterior prediction check", "Comparing the posterior with the prior"]

pp_check(vendor_price_model) +
  theme_classic() +
  theme(legend.position = "bottom") +
  scale_x_continuous(limits=c(0,100))

posterior_vs_prior(vendor_price_model) +
  theme_minimal() +
  scale_color_brewer(palette = "Set1") +
  theme(legend.position = "bottom") +
  coord_flip()
```

## Diagnostics

@fig-stanareyouokay-1 is a trace plot. It shows... This suggests...

@fig-stanareyouokay-2 is a Rhat plot. It shows... This suggests...

```{r}
#| echo: false
#| eval: true
#| message: false
#| warning: false
#| label: fig-stanareyouokay
#| fig-cap: "Checking the convergence of the MCMC algorithm"
#| fig-subcap: ["Trace plot", "Rhat plot"]
#| layout-ncol: 2

plot(vendor_price_model, "trace")

plot(vendor_price_model, "rhat")
```



\newpage


# References


